<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #myWrapper {
            margin: 0 auto;
            position: relative;
            width: 600px;
            height: 500px;
            border: 2px solid #00f;
        }
    </style>
</head>
<body>
    <div id = "myWrapper"></div>
    <div>
        <label>1</label><input type="text" id="inputVal1">
        <label>2</label><input type="text" id="inputVal2">
    </div>
    <div>
        <ul>
            <li><input type="button" value="move" id="moveBtn"></li>
            <li><input type="button" value="moveTo" id="moveToBtn"></li>
            <li><input type="button" value="zoom" id="zoomBtn"></li>
            <li><input type="button" value="zoomTo" id="zoomToBtn"></li>
            <li><input type="button" value="addTiny" id="addTiny"></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <script src="../jquery-1.8.3.min.js"></script>
    <script src="../FixIco4.js"></script>
    <script>
        window.inputVal1 = document.getElementById('inputVal1');
        window.inputVal2 = document.getElementById('inputVal2');
        window.moveBtn = document.getElementById('moveBtn');
        window.moveToBtn = document.getElementById('moveToBtn');
        window.zoomBtn = document.getElementById('zoomBtn');
        window.zoomToBtn = document.getElementById('zoomToBtn');
        window.addTinyBtn = document.getElementById('addTiny');
        window.myWrapper = document.getElementById('myWrapper');

        var pst = {width:800, height:600}; 
        window.fixIco = new FixIco({
            dom: 'myWrapper',
            pattern: 'img',
            src: '../a7.jpg',
            width: pst.width,
            height: pst.height,
            cells: {
                right: {
                    exist: true,
                    pst: {left: pst.width*0.8, top: 0, width:pst.width*0.2, height:pst.height},
                    html: function(){
                        var str =   '<div>' +
                                '<ul>'+
                                    '<li><input type="button" value="添加tiny" id="addTiny"></li>'+
                                    '<li><input type="button" value="更换背景图片" id="replaceBigBg"></li>'+
                                    '<li><input type="button" value="big顺时针旋转" id="bigRightRotate"></li>'+
                                    '<li><input type="button" value="big逆时针旋转" id="bigLeftRotate"></li>'+
                                    '<li><input type="button" value="tiny顺时针旋转" id="tinyRightRotate"></li>'+
                                    '<li><input type="button" value="tiny逆时针旋转" id="tinyLeftRotate"></li>'+
                                    '<li><input type="button" value="重置" id="reset"></li>'+
                                '</ul>'+
                            '</div>';
                        return str;
                    },
                    init: function(me){
                        console.log('cells的init', me);
                        var tinyId, 
                            bigImgSrc = ['../a7.jpg', '../a74.jpg'];
                        var addTinyBtn = document.getElementById('addTiny');
                        var replaceBigBgBtn = document.getElementById('replaceBigBg');
                        var bigRightRotateBtn = document.getElementById('bigRightRotate');
                        var bigLeftRotateBtn = document.getElementById('bigLeftRotate');
                        var tinyRightRotateBtn = document.getElementById('tinyRightRotate');
                        var tinyLeftRotateBtn = document.getElementById('tinyLeftRotate');
                        var resetBtn = document.getElementById('reset');
                        
                        // 添加tiny
                        addTinyBtn.addEventListener('click', function(){
                            tinyId = fixIco.addSimpleTiny();
                            fixIco.replaceTinyImg(tinyId, '../t1.jpg');
                        });
                        
                        // 更换big背景图片
                        replaceBigBgBtn.addEventListener('click', function(){
                            var oldsrc = fixIco.conf.bigsrc;
                            var newsrc = oldsrc === bigImgSrc[0] ? bigImgSrc[1] : bigImgSrc[0] 
                            console.warn('big背景图片src:', oldsrc, newsrc, bigImgSrc);
                            fixIco.replaceBigImg(newsrc);

                        });

                        // big顺时针旋转
                        bigRightRotateBtn.addEventListener('click', function(){
                            fixIco.rotateAll(true);
                        });

                        // big逆时针旋转
                        bigLeftRotateBtn.addEventListener('click', function(){
                            fixIco.rotateAll(false);
                        });

                        // tiny顺时针旋转
                        tinyRightRotateBtn.addEventListener('click', function(){

                        });

                        // tiny逆时针旋转
                        tinyLeftRotateBtn.addEventListener('click', function(){
                            
                        });
                        
                        // 重置
                        resetBtn.addEventListener('click', function(){
                            fixIco.recoverInit();
                        });
                    }
                }
            },
            dragendFn: function(event){
                console.warn('this是否等于fixIco', fixIco === this, this, event);
                var pst = fixIco.getTinyPstAboutBig(0);
                console.warn(pst);
            },
        });
        console.log('fixIco',fixIco);
        setTimeout(function(){
            // fixIco.replaceBigImg('./a7.jpg');
        }, 2000)
        addTinyBtn.addEventListener('click', function(){
            console.log('addTiny');
            var tinyId = fixIco.addSimpleTiny();
            fixIco.replaceTinyImg(tinyId, './t1.jpg');
        });
        // myWrapper.addEventListener('mousewheel', function(event){
        //     tiny.wheel(event);
        // });
        // 移动
        moveBtn.addEventListener('click', function(){
            fixIco.replaceBigImg('./a7.jpg');
        });
        moveToBtn.addEventListener('click', function(){
            var val1 = inputVal1.value;
            var val2 = inputVal2.value;
            console.log('moveTo移动值', val1, val2);
            tiny.moveTo(val1, val2);
        });
        // 缩放
        zoomBtn.addEventListener('click', function(){
            var val1 = inputVal1.value;
            var val2 = inputVal2.value;
            console.log('zoom缩放值', val1);
            tiny.zoom(val1, true);
        });
        zoomToBtn.addEventListener('click', function(){
            var val1 = inputVal1.value;
            var val2 = inputVal2.value;
            console.log('zoomTo缩放值', val1);
            tiny.zoomTo(val1, true);
        });
        
    </script>
</body>
</html>
